requires:
  depends-on:
    systemd: ceph-osd
    value: enabled
  and:
    - property: core.plugins.storage.ceph.CephChecksBase.local_osds_devtypes
      op: contains
      value: ssd
    - config:
      handler: core.plugins.storage.ceph.CephConfig
      assertions:
        bdev enable_discard:
          value: true
raises:
  type: core.issues.issue_types.CephWarning
  message: >-
    This host has osds with device_class 'ssd' but Bluestore discard is not
    enabled. The recommendation is to set 'bdev enable discard true'.
