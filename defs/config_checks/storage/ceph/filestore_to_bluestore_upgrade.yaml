# Check that if bluestore is enabled, there is no journal device configured.
# This can happen e.g. after an upgrade from Filestore to Bluestore.
requires:
  depends-on:
    property: core.plugins.storage.ceph.CephChecksBase.bluestore_enabled
  config:
    handler: core.plugins.storage.ceph.CephConfig
    assertions:
      osd_journal:
        value:
raises:
  type: core.issues.issue_types.CephWarning
  message: >-
    Ceph Bluestore is enabled yet there is a still a journal device
    configured in ceph.conf - please check
