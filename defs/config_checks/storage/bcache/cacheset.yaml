cset_config:
  requires:
    config:
      handler: core.plugins.storage.bcache.CachesetsConfig
      assertions:
        congested_read_threshold_us:
          value: 0
        congested_write_threshold_us:
          value: 0
  raises:
    type: core.issues.issue_types.BcacheWarning
lp1900438:
  requires:
    config:
      handler: core.plugins.storage.bcache.CachesetsConfig
      assertions:
        # The real limit is 30 but we go just above in case bcache is flapping
        # just above and below the limit.
        cache_available_percent:
          value: 33
          op: gt
  raises:
    type: core.issues.issue_types.BcacheWarning
    message: >-
      bcache cache_available_percent is approx. 30 which implies this node
      could be suffering from bug LP 1900438 - please check
